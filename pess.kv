#:import rgba kivy.utils.get_color_from_hex


<MenuButton@ButtonBehavior+Label>:
    canvas.before:
        Color:
            rgba: 0.1, 0.5, 0.7, 1
        Ellipse:
            pos: self.pos
            size: self.height, self.height
        Ellipse:
            pos: self.x + self.width - self.height, self.y
            size: self.height, self.height
        Rectangle:
            pos: self.x + self.height / 2, self.y
            size: self.width - self.height, self.height

<TrackerButton@Button>:
    background_color: 0,0,0,0

<ScreenGenerator>:
    Menu:
        name: 'menu'
    Trackers:
        name: 'track'

<Menu>:
    BoxLayout:
        orientation: 'vertical'
        padding: 9
        Image:
            source: 'book.png'
            allow_strech: True
        Label:
            id: menu_date
            text: ''
            markup: True
        MenuButton:
            text: 'Enter Trackers'
            height: 60
            size_hint_y: None
            background_image: ''
            background_color: rgba('#637075')
            on_release: app.root.current = 'track'

<Trackers>:
    BoxLayout:
        orientation: 'vertical'
        ActionBar:
            height: 45
            size_hint_y: None
            background_image: ''
            background_color: rgba('#0B3242')
            ActionView:
                ActionPrevious:
                    title: '[b]TRACKERS[/b]'
                    font_size: 21
                    color: rgba('#AFB7BA')
                    markup: True
                    on_release: app.root.current = 'menu'
                ActionButton:
                    text: 'SEND'
                    color: rgba('#AFB7BA')
                    on_release: root.send()
        ScrollView:
            BoxLayout:
                id: track
                spacing: 7
                orientation: 'vertical'
                padding: 20
                spacing: 7
                size_hint_y: None
                height: self.minimum_height
        BoxLayout:
            size_hint_y: None
            height: 45
            TextInput:
                id: text_input
                hint_text: 'Add Trackers'
                multiline: False
            Button:
                text: '+'
                size_hint_x: None
                width: 60
                on_release: root.addWidget()
                background_color: rgba('#1D7332')

<Tracker>:
    count_add: count_add
    size_hint_y: None
    height: 45


    canvas.before:
        Color:
            rgba: 0.1, 0.5, 0.7, 1
        Rectangle:
            pos: self.pos[0] + self.height/2, self.pos[1]
            size: self.size[0] - self.height, self.height
        Ellipse:
            pos: self.pos[0], self.pos[1]
            size: self.height, self.height
        Ellipse:
            pos: self.pos[0] + self.width - self.height, self.pos[1]
            size: self.height, self.height

    TrackerButton:
        text: '[b]X[/b]'
        markup: True
        size_hint_x: None
        width: 60
        color: 1, 1, 1, .4
        on_release: app.root.get_screen('track').delete_storage(root)

    TrackerButton:
        id: label
        font_size: 14
        on_release: Factory.PopupPaint().open()


    Label:
        id: count_add
        font_size: 14
        text: '0'

    TrackerButton:
        text: '[b]-[/b]'
        markup: True
        size_hint_x: None
        width: 60
        on_release: app.root.get_screen('track').subtract_num(root)

    TrackerButton:
        text: '[b]+[/b]'
        markup: True
        size_hint_x: None
        width: 60
        on_release: app.root.get_screen('track').add_num(root)
